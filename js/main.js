"use strict";var app={};app.partial={},($||jQuery)&&(app.$=$.noConflict()||jQuery.noConflict()),function(e){e(function(){e.each(app.partial,function(t,o){var n=e("[role="+t+"]");o(e,n),n.trigger("page:update")}),app.imageReload.callback=function(){e("[role=content]").addClass("loaded")},app.imageReload.init();e(window).on("scroll",function(){var t=e("header").offset().top+e("header").outerHeight();e(window).scrollTop()>=t?e("[role=content]").addClass("fixed-menu"):e("[role=content]").removeClass("fixed-menu")}).trigger("scroll"),e("[role=content] header nav a").on("click",function(t){var o=0,o=e("html.desktop").length?0:e("[role=content] header").outerHeight(),n=e("html.desktop").length?e("[role=content] header nav").outerHeight():e("[role=content] header").outerHeight(),a=n-o,i=e(e(this).attr("href")),r=i.length?i.offset().top-a:e("header").outerHeight();return TweenMax.to("html, body",.75,{scrollTop:r}),t.stopPropagation(),t.preventDefault(),e(this).parent().removeClass("in"),!1}),e("[role=content] header nav").on("click",function(t){e(this).toggleClass("in")});var t={},o=null,n=0;e("[data-nav]").each(function(o){var n=e(this).attr("id"),a=e(this).data().nav;a.replace(/[&]nbsp[;]/gi," ").replace(/\s/gi," ");t[n]={},t[n].ele=this,t[n].top=function(){return e(this.ele).offset().top},t[n].butt=function(){return e(this.ele).offset().top+e(this.ele).outerHeight()},t[n].middle=function(){var t=e(this.ele).offset().top+e(this.ele).outerHeight()/2;return t},t[n].height=function(){return e(this.ele).outerHeight()},t[n].title=a});var a=e(window).scrollTop();e(window).on("scroll",function(){e(window).scrollTop()>a;a=e(window).scrollTop();var i=e(window).scrollTop(),r=e(window).scrollTop()+e(window).height(),c=e(window).scrollTop()+e(window).height()/2,l=e("[role=content] header nav [href$="+o+"]");e("[data-nav]").each(function(a,s){var u=e(this).attr("id"),d=t[u];if(d.height()<=2*e(window).height()&&d.middle()>=i&&d.middle()<=r&&o!=u&&(o=u),d.height()>e(window).height()&&d.top()<=c&&d.butt()>=c&&o!=u&&(o=u),"index"==o&&(l=e("[role=main] header nav a:eq(0)")),o&&!l.hasClass("active")){var h=location.href;h="index"!=o?"./"+location.search+"#"+o:history.pushState?"./"+location.search:"./"+location.search+"#",e(l).addClass("active").trigger("button:active").siblings().removeClass("active"),history.pushState?history.pushState(null,e(this).data().nav,h):window.location.hash=h}n=i})}),e("[role=content] header nav").removeClass("in")})}(app.$);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};app.utility=new function(){var e=app.$;e.fn.hasAttr=function(t){var o=e(this).attr(t);return"undefined"!==("undefined"==typeof o?"undefined":_typeof(o))&&o!==!1},this.share={facebook:function(e,t){e=encodeURIComponent(e||location.href+"?utm_source=facebook&utm_medium=fbshare_m&utm_campaign=camp"),t=encodeURIComponent(t||document.title),window.open("https://www.facebook.com/sharer.php?u="+e+"&amp;t="+t)},googleplus:function(e){e=encodeURIComponent(e||location.href+"?utm_source=g+&utm_medium=googleplus_m&utm_campaign=camp"),window.open("https://plus.google.com/share?url="+e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},email:function(e,t){e=encodeURIComponent(e||location.href+"?utm_source=email&utm_medium=email_m&utm_campaign=camp"),t=encodeURIComponent(t||document.title);var o=encodeURIComponent(""+e+" #"+t);window.open("https://mail.google.com/mail/?view=cm&fs=1&to=&su=與你分享:"+t+"&body="+o+"&bcc=")}},this.getParam=function(e){var t=new RegExp("^.*[?&]"+e+"[=]([^&]+).*$","i");if(!t.test(location.search))return null;var o=location.search.replace(t,"$1");return decodeURIComponent(o)}},app.partial.preload=function(e){function t(t){function o(t){a[t]=!0;var o=!0;e.each(a,function(e,t){o=t&&o}),o&&n()}function n(){"function"==typeof app.imageReload.callback&&app.imageReload.callback()}var a={},i=[],r=e("img[data-src]:visible, figure[data-src]:visible").not(".loaded");r.each(function(t,o){e(o).attr("data-src")&&(a[e(o).attr("data-src")]=!1,i.push(o))}),e.each(a,function(t,n){if(/\.svg$/.test(t))e.get(t,function(n){e(i).filter(function(){return t==e(this).attr("data-src")}).each(function(t,o){e(o).addClass("loaded"),"img"===o.tagName.toLowerCase()?(e("svg",n).clone().attr("class",e(o).attr("class")).insertAfter(o),e(o).remove()):e(o).removeAttr("data-src").html(e("svg",n).clone())});o(t)});else{var a=new Image;a.onload=function(){e(i).filter(function(){return t==e(this).attr("data-src")}).each(function(t,o){e(o).addClass("loaded"),"img"===o.tagName.toLowerCase()?e(o).attr("src",e(o).attr("data-src")):e(o).css("background-image","url("+e(o).attr("data-src")+")")});o(t)},a.src=t}}),r.length||n()}app.dementions={mobile:!1,desktop:!1},app.imageReload={init:function(){e(window).on("resize",function(){e("img[data-src]:visible, figure[data-src]:visible").not("[src],[style]");t(function(){})}).trigger("resize")},refresh:function(){e(window).trigger("resize")},callback:function(){}}};